{"version":3,"sources":["../../scripts/main.ts"],"sourcesContent":["import { GameRules, world, system, GameRule } from \"@minecraft/server\";\n\nconst gyverGameruleName = \"gyver:gamerules\";\n\nworld.afterEvents.worldInitialize.subscribe((event) => {\n  const cachedRulesJSON = world.getDynamicProperty(gyverGameruleName);\n  if (typeof cachedRulesJSON === \"string\") {\n    let cachedRules = <GameRules>JSON.parse(cachedRulesJSON);\n    Object.entries(cachedRules).forEach(([key, value]) => {\n      world.getDimension(\"overworld\").runCommandAsync(`gamerule ${key} ${value}`);\n    });\n  }\n  world.afterEvents.gameRuleChange.subscribe((event) => {\n    let cachedRules;\n    const cachedRulesJSONold = world.getDynamicProperty(gyverGameruleName);\n    if (typeof cachedRulesJSONold === \"string\") {\n      cachedRules = JSON.parse(cachedRulesJSONold);\n      cachedRules[event.rule] = event.value;\n    }\n    const cachedRulesJSON = JSON.stringify(cachedRules);\n    if (typeof cachedRulesJSON === \"string\") {\n      world.setDynamicProperty(gyverGameruleName, cachedRulesJSON);\n    }\n  });\n  console.log(\"gamerule-saver loaded!\");\n});\n"],"mappings":";AAAA,SAAoB,aAA+B;AAEnD,IAAM,oBAAoB;AAE1B,MAAM,YAAY,gBAAgB,UAAU,CAAC,UAAU;AACrD,QAAM,kBAAkB,MAAM,mBAAmB,iBAAiB;AAClE,MAAI,OAAO,oBAAoB,UAAU;AACvC,QAAI,cAAyB,KAAK,MAAM,eAAe;AACvD,WAAO,QAAQ,WAAW,EAAE,QAAQ,CAAC,CAAC,KAAK,KAAK,MAAM;AACpD,YAAM,aAAa,WAAW,EAAE,gBAAgB,YAAY,GAAG,IAAI,KAAK,EAAE;AAAA,IAC5E,CAAC;AAAA,EACH;AACA,QAAM,YAAY,eAAe,UAAU,CAACA,WAAU;AACpD,QAAI;AACJ,UAAM,qBAAqB,MAAM,mBAAmB,iBAAiB;AACrE,QAAI,OAAO,uBAAuB,UAAU;AAC1C,oBAAc,KAAK,MAAM,kBAAkB;AAC3C,kBAAYA,OAAM,IAAI,IAAIA,OAAM;AAAA,IAClC;AACA,UAAMC,mBAAkB,KAAK,UAAU,WAAW;AAClD,QAAI,OAAOA,qBAAoB,UAAU;AACvC,YAAM,mBAAmB,mBAAmBA,gBAAe;AAAA,IAC7D;AAAA,EACF,CAAC;AACD,UAAQ,IAAI,wBAAwB;AACtC,CAAC;","names":["event","cachedRulesJSON"],"file":"../scripts/main.js"}